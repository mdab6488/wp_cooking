; PHP performance tweaks for local WordPress

; Increase memory for heavy plugins/themes
memory_limit = 1000M

; Execution time
max_execution_time = 600
max_input_time = 760000

; Uploads
upload_max_filesize = 64M
post_max_size = 64M

; Error reporting for development
display_errors = On
error_reporting = E_ALL
log_errors = On

; ============================================
; OPCACHE SETTINGS - MASSIVE PERFORMANCE BOOST
; ============================================

; Enable OPcache
opcache.enable = 1
opcache.enable_cli = 1

; Memory consumption
opcache.memory_consumption = 256
opcache.interned_strings_buffer = 16

; Maximum number of files that can be cached
opcache.max_accelerated_files = 10000

; Revalidate cache every 2 seconds in development
opcache.revalidate_freq = 2
opcache.validate_timestamps = 1

; Fast shutdown
opcache.fast_shutdown = 1

; File cache (second level cache)
opcache.file_cache = /var/www/.opcache
opcache.file_cache_only = 0
opcache.file_cache_consistency_checks = 1

; Save comments in op-code (needed for annotations)
opcache.save_comments = 1

; ============================================
; REALPATH CACHE - Reduces file system calls
; ============================================
realpath_cache_size = 4096K
realpath_cache_ttl = 600

; ============================================
; OUTPUT BUFFERING
; ============================================
output_buffering = 4096

; ============================================
; SESSION OPTIMIZATION
; ============================================
session.save_handler = files
session.save_path = "/tmp"

; ============================================
; DISABLE XDEBUG (huge performance impact)
; ============================================
xdebug.mode = off
xdebug.start_with_request = no